Il software AV utilizzerà in genere il rilevamento basato su firme, euristica e comportamento.

1. Rilevamento basato sulla firma: una firma AV è una sequenza univoca di byte unica
identifica il malware. Di conseguenza, dovrai assicurarti che il tuo exploit o payload sia offuscato
non corrisponde ad alcuna firma nota nel database AV.

Possiamo aggirare il rilevamento basato sulla firma modificando la sequenza di byte del malware,
cambiando quindi la firma.
2. Rilevamento basato sull'euristica: si basa su regole o decisioni per determinare se un codice binario lo è dannoso. Cerca anche modelli specifici all'interno del codice o delle chiamate al programma

3. Rilevamento basato sul comportamento: si basa sull'identificazione del malware monitorandone il comportamento. (Usato per i ceppi di malware più recenti).


### AV Evasion Techniques
##### Tecniche di evasione su disco
• Offuscamento: l'offuscamento si riferisce al processo di nascondere qualcosa di importante,
prezioso o critico. L'offuscamento riorganizza il codice per renderlo più difficile da analizzare o
RIF.
• Codifica: la codifica dei dati è un processo che prevede la modifica dei dati in un nuovo formato utilizzando a schema. La codifica è un processo reversibile; i dati possono essere codificati in un nuovo formato e decodificato nel suo formato originale.
• Packing: genera un eseguibile con una nuova struttura binaria di dimensioni inferiori e
fornisce quindi al payload una nuova firma.
• Crypters: crittografa il codice o i payload e decrittografa il codice crittografato in memoria. IL
la chiave/funzione di decrittazione viene solitamente archiviata in uno stub.

##### Tecniche di evasione in memoria
• Si concentra sulla manipolazione della memoria e non scrive file su disco.
• Inserisce il carico utile in un processo sfruttando varie API di Windows.
• Il payload viene quindi eseguito in memoria in un thread separato.


##### Obfuscation:
+ L'offuscamento si riferisce al processo di nascondere qualcosa di importante,
prezioso o critico. L'offuscamento riorganizza il codice per renderlo più difficile
analizzare o RE.
+ In qualità di penetration tester, ti ritroverai a lavorare con PowerShell
codificare frequentemente. La maggior parte delle soluzioni AV contrassegnerà immediatamente i malware
Di conseguenza, devi essere in grado di offuscare/codificare il tuo codice PowerShell
Codice e script PowerShell per evitare il rilevamento.

Invoke-Obfuscation is an open source PowerShell v2.0+ compatible
PowerShell command and script obfuscator
