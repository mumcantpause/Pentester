l protocollo Desktop remoto ( RDP) è un protocollo sviluppato da Microsoft per l'accesso remoto a un computer che esegue il sistema operativo Windows. Questo protocollo consente la trasmissione dei comandi di visualizzazione e controllo tramite la GUI crittografata su reti IP. RDP funziona a livello di applicazione nel modello di riferimento TCP/IP, in genere utilizzando la porta TCP 3389 come protocollo di trasporto. Tuttavia il protocollo UDP senza connessione può utilizzare la porta 3389 anche per l'amministrazione remota. 

Affinché venga stabilita una sessione RDP, sia il firewall di rete che il firewall sul server devono consentire connessioni dall'esterno. Se la traduzione dell'indirizzo di rete ( NAT) viene utilizzato nel percorso tra client e server, come spesso accade con le connessioni Internet, il computer remoto ha bisogno dell'indirizzo IP pubblico per raggiungere il server. Inoltre sul router NAT deve essere impostato un port forwarding in direzione del server. 

RDP ha gestito la sicurezza del livello di trasporto ( TLS/SSL) a partire da Windows Vista, il che significa che tutti i dati, e soprattutto il processo di login, sono protetti nella rete grazie alla loro buona crittografia. Molti sistemi Windows però non insistono su questo punto ma accettano comunque una crittografia inadeguata tramite RDP Security . Ciononostante, anche in questo caso un aggressore è ben lungi dall’essere bloccato, poiché i certificati che forniscono l’identità sono semplicemente autofirmati per impostazione predefinita. Ciò significa che il client non è in grado di distinguere un certificato autentico da uno contraffatto e genera un avviso di certificato per l'utente. 

IL Remote Desktopil servizio è installato per impostazione predefinita sui server Windows e non richiede applicazioni esterne aggiuntive. Questo servizio è attivabile tramite il Server Manager e viene fornito con l'impostazione predefinita per consentire le connessioni al servizio solo agli host con autenticazione a livello di rete ( NLA).   uno script Perl denominato rdp-sec-check.pl ha sviluppato anche Cisco CX Security Labs in grado di identificare in modo non autentico le impostazioni di sicurezza dei server RDP in base agli handshake.   

xfreerdp /u: cry0l1t3 /p:"password" /v:10.129.201.240   per connettersi

```

### RDP Client:

# RDP Client - xfreerdp
xfreerdp /u:administrator /p:qwertyuiop /v:10.4.18.131:3333

# RDP Client - rdesktop
rdesktop -u Administrator -p passwd123 192.168.1.111:3389


### Metasploit - Detected RDP
> msfconsole
> use auxiliary/scanner/rdp/rdp_scanner 
> set RHOSTS 10.4.18.131 
> set RPORT 3333 
> run


### Hydra - Bruteforce RDP login
hydra -L /usr/share/metasploit-framework/data/wordlists/common_users.txt -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt rdp://10.4.18.131 -s 3333`




```

#### RDP - Vulnerabilità Note
```
#BlueKeep:
BlueKeep è una vulnerabilità wormable che colpisce i sistemi Windows con Remote Desktop Services (RDS) abilitato.
A differenza di EternalBlue, che mirava a una versione legacy del protocollo SMB, BlueKeep si rivolge a un protocollo ampiamente utilizzato da molte aziende.
Questa vulnerabilità consente l’esecuzione di codice su un computer con RDS abilitato senza la necessità di autenticazione.
- XP, Windows Vista, Windows 7, Windows Server 2008


```